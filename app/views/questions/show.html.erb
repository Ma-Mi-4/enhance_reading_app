<% content_for :body_attributes do %>
  data-page="show" data-turbo="false" data-has-timer="true"
<% end %>

<div class="page-container">

  <h1 class="text-center">
    <%= @question_set.title %>
  </h1>

  <div class="max-w-3xl mx-auto mb-8 text-left leading-loose">
    <%= simple_format(@question_set.content) %>
  </div>

  <%= form_with url: explanation_question_path(@question_set.uuid),
              method: :post,
              local: true,
              id: "question_form",
              data: { correct: @correct_indexes.to_json } do |f| %>

    <div id="timer" style="font-size: 20px; margin-bottom: 16px;">00:00</div>

    <%= f.hidden_field :study_seconds, value: 0, id: "study_seconds" %>
    <%= f.hidden_field :accuracy, value: 0, id: "accuracy_field_questions" %>

    <% @questions.each_with_index do |q, index| %>
      <div class="question-block max-w-3xl mx-auto text-left mb-8">
        <p class="mb-4 leading-relaxed">
          <strong>Question <%= index + 1 %>:</strong> <%= q[:body] %></p>

        <ul class="choice-list text-left space-y-2">
          <% q[:choices].each_with_index do |choice, i| %>
            <li class="choice-item">
              <input type="radio" name="q<%= index %>" value="<%= i %>"
                     id="q<%= index %>_choice<%= i %>">
              <label for="q<%= index %>_choice<%= i %>"><%= choice %></label>
            </li>
          <% end %>
        </ul>

      </div>
    <% end %>

    <%= f.submit "解説を見る", class: "btn btn-primary mt-4" %>

  <% end %>

</div>
