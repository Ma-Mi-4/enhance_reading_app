<% content_for :body_attributes do %>
  data-turbo="false"
<% end %>

<h1><%= @question_set.title %></h1>

<p><%= simple_format(@question_set.content) %></p>

<%= form_with url: explanation_question_path(@question_set),
              method: :post,
              local: true,
              html: { id: "question_form" },
              data: {
                correct: @questions.map { |q| q[:correct_index] }.to_json
              } do |f| %>

  <div id="timer" style="font-size: 24px;">00:00</div>

  <%= hidden_field_tag :study_seconds, 0, id: "study_seconds" %>
  <%= hidden_field_tag :accuracy, 0, id: "accuracy_field_questions" %>

  <% @questions.each_with_index do |q, index| %>
    <div style="margin-bottom: 20px; padding: 10px; border: 1px solid #ccc;">
      <p><strong>Question <%= index + 1 %>:</strong> <%= q[:body] %></p>

      <ul>
        <% q[:choices].each_with_index do |choice, i| %>
          <li>
            <input type="radio"
                   name="q<%= index %>"
                   value="<%= i %>"
                   id="q<%= index %>_choice<%= i %>">

            <label for="q<%= index %>_choice<%= i %>"><%= choice %></label>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.submit "解説を見る", class: "btn btn-primary" %>
<% end %>
