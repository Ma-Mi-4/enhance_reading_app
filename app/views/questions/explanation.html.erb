<div class="page-container">

  <h1>解説: <%= @question_set.title %></h1>

  <!-- Part7 本文 -->
  <div style="margin-bottom: 20px;">
    <%= simple_format(@question_set.content) %>
  </div>

  <% @questions.each_with_index do |q, index| %>

    <div class="question-block">

      <p>
        <strong>問題 <%= index + 1 %>:</strong>
        <%= q[:body] %>
      </p>

      <p style="color: green; font-weight: bold;">
        正解：<%= q[:choices][q[:correct_index]] %>
      </p>

      <hr>

      <h4>間違いの選択肢と解説：</h4>
      <% q[:choices].each_with_index do |choice, i| %>
        <% next if i == q[:correct_index] %>

        <% wrong_explanation =
             q[:wrong_explanations].present? ?
               q[:wrong_explanations][i] : nil %>

        <p>
          <strong><%= choice %></strong>：
          <%= wrong_explanation.presence || "（解説なし）" %>
        </p>
      <% end %>

      <% if q[:explanation].present? %>
        <p><strong>解説:</strong> <%= q[:explanation] %></p>
      <% end %>

      <% if q[:example_sentence].present? %>
        <p><strong>例文:</strong> <%= q[:example_sentence] %></p>
      <% end %>

    </div>

  <% end %>

  <%= link_to "復習問題へ", quiz_path(@question_set.quiz_set),
        class: "btn btn-primary w-full mt-4" %>

</div>
