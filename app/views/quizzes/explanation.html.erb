<div class="page-container reading">

  <h1>復習解説</h1>

  <% @questions.each_with_index do |q, idx| %>

    <div class="explanation-block">

      <h3>問題 <%= idx + 1 %></h3>

      <!-- 正解 -->
      <p class="correct-answer">
        正解: <%= q[:choices][q[:correct_index]] %>
        ： <%= q[:explanation_list][q[:correct_index]] %>
      </p>

      <!-- 選択肢別解説 -->
      <p class="section-title">選択肢別の解説</p>
      <% q[:choices].each_with_index do |choice, i| %>
        <% next if i == q[:correct_index] %>

        <p class="choice-explanation">
          <strong><%= choice %></strong>：
          <%= q[:explanation_list][i].presence || "（解説なし）" %>
        </p>
      <% end %>

      <!-- 例文 -->
      <% if q[:example_sentence].present? %>
        <p class="section-title">例文</p>
        <p><%= q[:example_sentence] %></p>
      <% end %>

    </div>

  <% end %>

  <%= link_to "学習を終了してカレンダーへ", calendars_path, class: "btn btn-primary w-full" %>

</div>
